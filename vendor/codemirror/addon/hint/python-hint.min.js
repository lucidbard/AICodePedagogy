// Python hint addon for CodeMirror
(function(mod) {
  if (typeof exports == "object" && typeof module == "object")
    mod(require("../../lib/codemirror"));
  else if (typeof define == "function" && define.amd)
    define(["../../lib/codemirror"], mod);
  else
    mod(CodeMirror);
})(function(CodeMirror) {
  var pythonKeywords = "and as assert break class continue def del elif else except finally for from global if import in is lambda not or pass raise return try while with yield None True False print range len str int float list dict tuple set".split(" ");

  CodeMirror.registerHelper("hint", "python", function(editor) {
    var cur = editor.getCursor(), token = editor.getTokenAt(cur);
    var start = token.start, end = cur.ch;
    var word = token.string.slice(0, end - start);

    if (!word || word.length < 1) return;

    var matches = pythonKeywords.filter(function(kw) {
      return kw.indexOf(word) === 0;
    });

    if (matches.length === 0) return;

    return {
      list: matches,
      from: CodeMirror.Pos(cur.line, start),
      to: CodeMirror.Pos(cur.line, end)
    };
  });
});
